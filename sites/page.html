<!DOCTYPE html>
<!--
Simulate MLB Showdown games and give the results!   
-->
<html>
    <head>
        <meta charset="UTF-8">
        <title>Run Simulation</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
        <!-- <link rel="stylesheet" href="jqueryform.css"/>-->
        <!-- <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>-->
        <script src="jqueryform.js"></script> -->
    </head>
    <body>
        <h1>MLB Form. Build server side.</h1>
        <div id="container"><form id="inputForm"> <!-- Use ajax instead of: action="" method="post" -->
            <div id="batters" text="Name Batter 1">
                <input id="h" type="text" name="name" value="" class="card-name"/>
                <input list="bat1so" name="b1s" text="SO" class="chart-val"/>
                
             </div>
             <input type="button" id="submit" name="run" value="Run Simulation" >
        </form></div>

        <datalist id="bat1so">
          <option value="0">
          <option value="1">
          <option value="2">
          <option value="3">
          <option value="4">
        </datalist>
        <select name="bat1so1">
          <option value="0"></option> 
          <option value="1" selected>1</option>
          <option value="2">Value 2</option>
        </select>
    </body>
    <script>$('#submit').click(function(){
  $.ajax({
    type: "GET",
    url: "/runsim",
    //dataType: "json", // don't need a dataType, default contentType is application/x-www-form-urlencoded
    data: $("#inputForm").serialize(),
    cache: false,
    timeout: 5000,
    success: function(data) {
        console.log(data[0].jsonname);
        
        console.log(data);
        var myJSONText = JSON.stringify(data);
        console.log(myJSONText);
        $("#submit").val(data[0].jsonname);
    },
    error: function(textStatus, errorThrown) {
        alert('data transmission error');
    }
  })
});

//Don't need????
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
    </script>
</html>